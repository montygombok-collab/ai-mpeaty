<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SHAHRAZAD ELECTRIC - نظام المبيعات</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="images/logo.png">
  
  <!-- مكتبات خارجية -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyBtc-pniRx5Mda5UW_kNqS0Zyi8zcKvdlU",
      authDomain: "shahrazad-electric.firebaseapp.com",
      projectId: "shahrazad-electric",
      storageBucket: "shahrazad-electric.firebasestorage.app",
      messagingSenderId: "582314926345",
      appId: "1:582314926345:web:39c2979beadd8b47a133d8",
      measurementId: "G-3RH0BKKW16"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
  </script>
</head>

<body>
  <!-- شاشة تسجيل الدخول -->
  <section id="login-section" class="auth-section">
    <div class="auth-container">
      <img src="images/logo.png" alt="Logo" class="logo">
      <h1>نظام المبيعات - شهرزاد إلكتريك</h1>
      <input type="email" id="loginEmail" placeholder="البريد الإلكتروني" />
      <input type="password" id="loginPassword" placeholder="كلمة المرور" />
      <button id="loginBtn">تسجيل الدخول</button>
      <p class="forgot">هل نسيت كلمة السر؟</p>
    </div>
  </section>

  <!-- واجهة النظام -->
  <section id="main-section" class="hidden">
    <header class="topbar">
      <h2>مرحباً، <span id="userName"></span></h2>
      <button id="logoutBtn">تسجيل الخروج</button>
    </header>

    <nav class="sidebar">
      <ul>
        <li data-section="dashboard" class="active">📊 الإحصائيات</li>
        <li data-section="products">📦 الأصناف</li>
        <li data-section="warehouses">🏭 المخازن</li>
        <li data-section="customers">👨‍💼 العملاء</li>
        <li data-section="invoices">🧾 الفواتير</li>
        <li data-section="alerts">⚠️ التنبيهات</li>
        <li data-section="settings">⚙️ الإعدادات</li>
        <li data-section="backup">💾 النسخ الاحتياطي</li>
      </ul>
    </nav>

    <main id="content">
      <!-- لوحة الإحصائيات -->
      <section id="dashboard" class="content-section">
        <h3>الإحصائيات العامة</h3>
        <canvas id="salesChart"></canvas>
      </section>

      <!-- الأصناف -->
      <section id="products" class="content-section hidden">
        <h3>إدارة الأصناف</h3>
        <button id="addProductBtn">➕ إضافة صنف جديد</button>
        <div id="productsList"></div>
      </section>

      <!-- المخازن -->
      <section id="warehouses" class="content-section hidden">
        <h3>المخازن</h3>
        <div id="warehousesList"></div>
      </section>

      <!-- العملاء -->
      <section id="customers" class="content-section hidden">
        <h3>العملاء</h3>
        <div id="customersList"></div>
      </section>

      <!-- الفواتير -->
      <section id="invoices" class="content-section hidden">
        <h3>الفواتير</h3>
        <button id="newInvoiceBtn">🧾 إنشاء فاتورة</button>
        <div id="invoicesList"></div>
      </section>

      <!-- التنبيهات -->
      <section id="alerts" class="content-section hidden">
        <h3>التنبيهات</h3>
        <div id="alertsList"></div>
      </section>

      <!-- الإعدادات -->
      <section id="settings" class="content-section hidden">
        <h3>الإعدادات العامة</h3>
        <div>
          <button id="changePasswordBtn">تغيير كلمة المرور</button>
          <button id="manageUsersBtn">إدارة المستخدمين</button>
        </div>
      </section>

      <!-- النسخ الاحتياطي -->
      <section id="backup" class="content-section hidden">
        <h3>النسخ الاحتياطي</h3>
        <button id="backupBtn">💾 إنشاء نسخة احتياطية</button>
      </section>
    </main>
  </section>

  <!-- سكريبتات النظام -->
  <script type="module" src="js/app.js"></script>
  <script type="module" src="js/utils.js"></script>
  <script type="module" src="js/database.js"></script>
  <script type="module" src="js/products.js"></script>
  <script type="module" src="js/invoices.js"></script>
  <script type="module" src="js/assistant.js"></script>

  <!-- تنسيقات المساعد الذكي -->
  <style>
    #assistant-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: #004aad;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 26px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    #assistant-chat {
      position: fixed;
      bottom: 90px;
      left: 20px;
      width: 320px;
      height: 420px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 1000;
    }

    #assistant-chat.open { display: flex; }
    .chat-header {
      background: #004aad;
      color: #fff;
      padding: 10px;
      text-align: center;
      font-weight: bold;
    }
    .chat-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      background: #f3f6fa;
    }
    .chat-input {
      display: flex;
      padding: 10px;
      gap: 5px;
      border-top: 1px solid #ddd;
      background: #fff;
    }
    .chat-input input {
      flex: 1;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .chat-input button {
      background: #004aad;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
    }
    .msg {
      margin: 5px 0;
      padding: 8px 10px;
      border-radius: 10px;
      max-width: 85%;
    }
    .msg.user {
      background: #d1e7ff;
      align-self: flex-end;
    }
    .msg.bot {
      background: #eee;
      align-self: flex-start;
    }
  </style>
</body>
</html>
